fn add_account(req: Request(mist.Body)) {
  req
  |> mist.read_body
  |> result.map(fn(req) {
    response.new(200)
    |> mist.bit_builder_response(bit_builder.from_string({
      case bit_string.to_string(req.body) {
        Ok(body) -> {
          // parse json
          let assert Ok(add_account_body) = add_account_body_from_json(body)
          database.add_account(add_account_body.login)
          "OK"
        }
        Error(err) -> {
          debug(err)
          "Error: invalid or missing value for login"
        }
      }
    }))
  })
  |> result.unwrap(
    response.new(400)
    |> mist.empty_response,
  )
}